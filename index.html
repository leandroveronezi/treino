<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#FFD700">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Treino">
    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23FFD700'/%3E%3Ctext x='50' y='50' text-anchor='middle' dy='.3em' font-family='Arial' font-size='40' font-weight='bold' fill='%23333'%3Eüí™%3C/text%3E%3C/svg%3E">
    <title>Treino</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="custom-dialog.css">
</head>

<body>

    <header>
        <h1>Treino</h1>
    </header>

    <div class="container">
        <div class="top-bar">
            <div class="date-row">
                <label class="date-label" for="selectedDate">Data:</label>
                <input type="date" id="selectedDate">
            </div>
            <div class="weight-row">
                <label class="date-label" for="bodyWeight">Peso (kg):</label>
                <input type="number" id="bodyWeight" placeholder="70" step="0.1">
            </div>
            <div class="nav-buttons">
                <button class="btn-nav" id="btnPrevDay" onclick="navigateToPreviousDay()">‚óÄ Dia Anterior</button>
                <button class="btn-nav" id="btnNextDay" onclick="navigateToNextDay()">Pr√≥ximo Dia ‚ñ∂</button>
            </div>
            <div class="top-actions">
                <button class="btn-secondary" onclick="openCharts()">üìà Evolu√ß√£o</button>
                <button class="btn-secondary" onclick="openHistory()">üóÇ Hist√≥rico</button>
                <button class="btn-secondary" onclick="clearDone()">üßπ Limpar</button>
            </div>
        </div>

        <!-- -->

        <div id="summary" class="summary"></div>

        <h3 class="section-title">PLANEJADO:</h3>
        <div id="plan-list" class="section-list"></div>
        <button class="btn-secondary" onclick="openCatalog('plan')">+ Planejar</button>

        <h3 class="section-title">FEITO:</h3>
        <p style="font-size: 0.8rem; color: #555; margin-top: 0;">(Toque no item para editar)</p>

        <div id="workout-list"></div>
        <br><br><br><br> <!-- Espa√ßo para o bot√£o flutuante -->
    </div>

    <!-- BOT√ÉO FLUTUANTE ADICIONAR -->
    <button class="btn-main" onclick="openCatalog('done')">+ ADICIONAR EXERC√çCIO</button>

    <!-- MODAL 1: CAT√ÅLOGO VISUAL -->
    <div id="catalogModal" class="modal">
        <div class="modal-header">
            <h3 style="margin:0">Escolha o Aparelho</h3>
            <button class="close-btn" onclick="closeCatalog()">√ó</button>
        </div>

        <div class="catalog-search">
            <input id="catalogSearch" type="text" placeholder="Buscar exerc√≠cio..." oninput="onCatalogSearch()">
        </div>

        <!-- Abas -->
        <div class="category-scroll">
            <div class="cat-chip active" onclick="filterCat('peito', this)">Peito</div>
            <div class="cat-chip" onclick="filterCat('costas', this)">Costas</div>
            <div class="cat-chip" onclick="filterCat('pernas', this)">Pernas</div>
            <div class="cat-chip" onclick="filterCat('ombros', this)">Ombros</div>
            <div class="cat-chip" onclick="filterCat('bracos', this)">Bra√ßos</div>
            <div class="cat-chip" onclick="filterCat('abs', this)">Abd√¥men</div>
            <div class="cat-chip" onclick="filterCat('cardio', this)">Cardio</div>
        </div>

        <!-- Grid de Fotos -->
        <div id="visualGrid" class="visual-grid">
            <!-- Preenchido via JS -->
        </div>
    </div>

    <!-- MODAL 2: DETALHES (PESO) -->
    <div id="detailsModal" class="details-modal">
        <div class="details-box">
            <h3 id="modalTitle" style="text-align: center; margin-top: 0;">Supino</h3>
            <div id="modalImg" style="width:100%; height:100px; object-fit:contain; background:#fff; margin-bottom:10px; display:flex; align-items:center; justify-content:center;"></div>

            <div id="suggestionBox" class="suggestion"></div>

            <div id="strengthInputs" class="input-row">
                <div class="input-col">
                    <label>S√©ries</label>
                    <input type="number" id="newSets" value="3">
                </div>
                <div class="input-col">
                    <label>Reps</label>
                    <input type="number" id="newReps" value="12">
                </div>
                <div class="input-col">
                    <label>Peso (kg)</label>
                    <input type="number" id="newWeight" placeholder="kg">
                </div>
            </div>

            <div id="cardioInputs" class="input-row" style="display:none;">
                <div class="input-col">
                    <label>Tempo (min)</label>
                    <input type="number" id="newTimeMin" value="20">
                </div>
                <div class="input-col">
                    <label>Velocidade (km/h)</label>
                    <input type="number" id="newSpeedKmh" value="8" step="0.1">
                </div>
            </div>

            <button id="btnSave" class="btn-main" onclick="confirmAdd()">Salvar no Treino</button>
            <button onclick="closeDetails()" style="width:100%; padding:10px; background:none; border:none; color:#aaa; margin-top:5px;">Cancelar</button>
        </div>
    </div>

    <div id="chartsModal" class="modal">
        <div class="modal-header">
            <h3 style="margin:0">Evolu√ß√£o</h3>
            <button class="close-btn" onclick="closeCharts()">√ó</button>
        </div>
        <div class="charts-content">
            <div class="chart-controls">
                <select id="chartRange" onchange="renderCharts()">
                    <option value="7">7 dias</option>
                    <option value="30" selected>30 dias</option>
                    <option value="90">90 dias</option>
                </select>
                <select id="chartType" onchange="renderCharts()">
                    <option value="volume" selected>Volume (Muscula√ß√£o)</option>
                    <option value="cardio">Cardio (Dist√¢ncia)</option>
                    <option value="pr">PR (Melhor Carga)</option>
                </select>
            </div>
            <canvas id="chartCanvas" class="chart-canvas" width="320" height="180"></canvas>
            <div id="chartLegend" class="chart-legend"></div>
        </div>
    </div>

    <div id="historyModal" class="modal">
        <div class="modal-header">
            <h3 style="margin:0">Hist√≥rico</h3>
            <button class="close-btn" onclick="closeHistory()">√ó</button>
        </div>
        <div class="history-content">
            <div id="historyList" class="history-list"></div>
        </div>
    </div>

    <script src="custom-dialog.js"></script>
    <script src="main.js"></script>
</body>

</html>